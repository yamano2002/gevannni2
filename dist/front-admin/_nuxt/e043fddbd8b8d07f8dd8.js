(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{406:function(t,e,n){"use strict";var r={name:"PageTitleComponent"},o=n(6),component=Object(o.a)(r,function(){var t=this.$createElement;return(this._self._c||t)("h1",[this._t("default")],2)},[],!1,null,"46686d52",null);e.a=component.exports},407:function(t,e,n){"use strict";var r=n(2),o=n(7),l={name:"GroupEditorFormComponent",props:{formOptions:{type:Object,default:null}},data:function(){return{rules:{name:[function(t){return!!t||"必須項目です"}],name_kana:[function(t){return!!t||"必須項目です"},function(t){return/^[ァ-ー]+$/.test(t)||"全角カタカナのみで入力してください"}],charge_person_name:[function(t){return!!t||"必須項目です"}],tel:[function(t){return!!t||"必須項目です"},function(t){return/^[0-9]+$/.test(t)||"半角数字のみで入力してください"}],mail:[function(t){return!!t||"必須項目です"},function(t){return/^.+@.+$/.test(t)||"メールアドレスの書式で入力してください"}]}}},computed:Object(r.a)({},Object(o.e)("buildings",["buildings"]),Object(o.e)("group/editor",["error"]),{valid:{get:function(){return this.formOptions.methods.getValidMethod},set:function(t){this.formOptions.methods.setValidMethod(this.formOptions.formType,t)}},values:{get:function(){return this.formOptions.methods.getValuesMethod},set:function(t){this.formOptions.methods.setValidMethod(this.formOptions.formType,t)}}}),methods:{}},c=n(6),component=Object(c.a)(l,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-form",{on:{submit:function(e){return e.preventDefault(),t.formOptions.methods.setValues(e)}},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[n("v-layout",{staticClass:"px-3"},[t._v("\n    以下のフォームに入力をしてください。\n  ")]),t._v(" "),t.error?n("v-layout",{staticClass:"px-3 error--text mt-2"},[t._v("\n    登録に失敗しました。団体名が重複していないことを確認してください。\n  ")]):t._e(),t._v(" "),n("v-container",{attrs:{fluid:""}},[n("v-layout",{attrs:{row:""}},[n("v-flex",{attrs:{xs12:""}},[n("v-text-field",{attrs:{rules:t.rules.name,label:"団体名"},model:{value:t.values.name,callback:function(e){t.$set(t.values,"name",e)},expression:"values.name"}})],1)],1),t._v(" "),n("v-layout",{attrs:{row:""}},[n("v-flex",{attrs:{xs12:""}},[n("v-text-field",{attrs:{rules:t.rules.name_kana,label:"団体名カナ"},model:{value:t.values.name_kana,callback:function(e){t.$set(t.values,"name_kana",e)},expression:"values.name_kana"}})],1)],1),t._v(" "),n("v-layout",{attrs:{row:""}},[n("v-flex",{attrs:{xs12:""}},[n("v-select",{attrs:{items:t.buildings,"item-text":"name","item-value":"id",label:"部室のある建物"},model:{value:t.values.BuildingId,callback:function(e){t.$set(t.values,"BuildingId",e)},expression:"values.BuildingId"}})],1)],1),t._v(" "),n("v-layout",{attrs:{row:""}},[n("v-flex",{attrs:{xs12:""}},[n("v-text-field",{attrs:{rules:t.rules.charge_person_name,label:"担当者氏名"},model:{value:t.values.charge_person_name,callback:function(e){t.$set(t.values,"charge_person_name",e)},expression:"values.charge_person_name"}})],1)],1),t._v(" "),n("v-layout",{attrs:{row:""}},[n("v-flex",{attrs:{xs12:""}},[n("v-text-field",{attrs:{rules:t.rules.tel,type:"tel",label:"担当者電話番号"},model:{value:t.values.tel,callback:function(e){t.$set(t.values,"tel",e)},expression:"values.tel"}})],1)],1),t._v(" "),n("v-layout",{attrs:{row:""}},[n("v-flex",{attrs:{xs12:""}},[n("v-text-field",{attrs:{rules:t.rules.mail,type:"email",label:"担当者メールアドレス"},model:{value:t.values.mail,callback:function(e){t.$set(t.values,"mail",e)},expression:"values.mail"}})],1)],1)],1),t._v(" "),n("v-btn",{staticClass:"d-none",attrs:{type:"submit"}},[t._v("submit")])],1)},[],!1,null,"4da0c497",null);e.a=component.exports},422:function(t,e,n){"use strict";var r=n(2),o=n(7),l={name:"GroupListSelectorComponent",props:{formType:{type:String,default:""}},computed:Object(r.a)({},Object(o.e)("lists",["lists"]),Object(o.e)("group/groupList",["targetListId"])),methods:Object(r.a)({},Object(o.b)("group/groupList",["retrieveGroupList"]),Object(o.d)("group/register",["SELECT_LIST"]),{checkTypeandSetList:function(t){switch(this.formType){case"watch":this.retrieveGroupList(t);break;case"register":this.SELECT_LIST(t)}}})},c=n(6),component=Object(c.a)(l,function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("v-select",{attrs:{items:this.lists,label:"リスト","item-text":"name","item-value":"id",outline:"",placeholder:"選択してください..."},on:{change:this.checkTypeandSetList}})],1)},[],!1,null,"20a748aa",null);e.a=component.exports},423:function(t,e,n){"use strict";var r={name:"GroupEditorComponent",components:{EditorForm:n(407).a},props:{FormOptions:{type:Function,default:null}},computed:{isOpen:{get:function(){return this.FormOptions().methods.getOpenMethod},set:function(t){this.FormOptions().methods.setOpenMethod(this.FormOptions().formType,t)}}},methods:{checkTypeandsetValues:function(t){this.FormOptions().methods.setValues(t)}}},o=n(6),component=Object(o.a)(r,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.isOpen,callback:function(e){t.isOpen=e},expression:"isOpen"}},[n("v-card",[n("v-card-title",[n("span",{staticClass:"headline"},[t._v("\n        "+t._s(t.FormOptions().title)+"\n      ")])]),t._v(" "),n("v-card-text",[n("EditorForm",{attrs:{"form-options":t.FormOptions()}})],1),t._v(" "),n("v-card-actions",[n("v-spacer"),t._v(" "),n("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:function(e){t.isOpen=!1}}},[t._v("キャンセル")]),t._v(" "),n("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:function(e){t.checkTypeandsetValues(t.FormOptions().formType)}}},[t._v("保存")])],1)],1)],1)},[],!1,null,"3f9f67ac",null);e.a=component.exports},469:function(t,e,n){"use strict";n.r(e);n(10),n(4);var r=n(0),o=n(2),l=n(17),c=n(406),d=n(422),v=(n(144),n(7)),m=n(195),h={name:"GroupListComponent",data:function(){return{search:"",rows:[25,50,100,{text:"$vuetify.dataIterator.rowsPerPageAll",value:-1}],pagination:{descending:!0,sortBy:"updatedAt"}}},computed:Object(o.a)({},Object(v.e)("group/groupList",["groups","targetListId"]),Object(v.c)("group/groupList",["targetList"]),Object(v.c)("auth",["hasScope"]),{hasPrivScope:function(){return this.hasScope(l.a.GROUP)},tableHeaders:function(){var t=[{text:"団体ID",value:"fullIdPub"},{text:"団体名",value:"name"},{text:"団体名 (カナ)",value:"name_kana"},{text:"部室",value:"BuildingId"}];return this.hasPrivScope&&(t=t.concat([{text:"担当者氏名",value:"charge_person_name"},{text:"メールアドレス",value:"mail"},{text:"電話番号",value:"tel"}])),t=t.concat([{text:"登録",value:"firstRegisteredAt"},{text:"更新",value:"updatedAt"}]),this.hasPrivScope&&(t=t.concat([{text:"操作",sortable:!1}])),t},filteredGroups:function(){return this.search?Object(m.a)(this.groups,this.search):this.groups}}),methods:Object(o.a)({},Object(v.b)("group/editor",["openEditor"]),Object(v.b)("group/delete",["deleteGroup"]),{formatDatetime:function(t){return this.$moment(t).format("lll")}})},f=n(6),_=Object(f.a)(h,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.targetListId?n("div",[n("v-card",[n("v-card-title",[n("span",{staticClass:"grey--text"},[t._v("テーブルの横幅がはみ出す場合は横にスクロールできます。")]),t._v(" "),n("v-spacer"),t._v(" "),n("v-text-field",{attrs:{"append-icon":"search",label:"検索","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),t._v(" "),n("v-data-table",{staticClass:"no-wrap",attrs:{headers:t.tableHeaders,items:t.filteredGroups,"rows-per-page-items":t.rows,pagination:t.pagination,"no-data-text":"登録団体は 0 件です"},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"items",fn:function(e){return[n("td",[t._v(t._s(e.item.fullIdPub))]),t._v(" "),n("td",[t._v(t._s(e.item.name))]),t._v(" "),n("td",[t._v(t._s(e.item.name_kana))]),t._v(" "),n("td",[e.item.Building?n("span",[t._v(t._s(e.item.Building.name))]):n("span",[t._v("なし")])]),t._v(" "),t.hasPrivScope?n("td",[t._v(t._s(e.item.charge_person_name))]):t._e(),t._v(" "),t.hasPrivScope?n("td",[t._v(t._s(e.item.mail))]):t._e(),t._v(" "),t.hasPrivScope?n("td",[t._v(t._s(e.item.tel))]):t._e(),t._v(" "),n("td",[t._v(t._s(t.formatDatetime(e.item.firstRegisteredAt)))]),t._v(" "),n("td",[t._v(t._s(t.formatDatetime(e.item.updatedAt)))]),t._v(" "),t.hasPrivScope?n("td",{staticClass:"layout"},[n("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(n){t.openEditor(e.item.id)}}},[t._v("\n              edit\n            ")]),t._v(" "),n("v-icon",{attrs:{small:""},on:{click:function(n){t.deleteGroup(e.item.id)}}},[t._v("\n              delete\n            ")])],1):t._e()]}}])})],1)],1):n("div",[t._v("リストを選択してください。")])])},[],!1,null,"83a94048",null).exports,O=n(423),x={name:"GroupsIndexPage",components:{PageTitle:c.a,ListSelector:d.a,GroupList:_,GroupEditor:O.a},computed:Object(o.a)({},Object(v.c)("auth",["hasScope"]),{hasPrivScope:function(){return this.hasScope(l.a.GROUP)}}),validate:function(t){return t.store.dispatch("auth/scopeFilter",[l.a.GROUP,l.a.GROUP_INF]),!0},fetch:function(){var t=Object(r.a)(regeneratorRuntime.mark(function t(e){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.store,t.next=3,n.dispatch("buildings/getBuildings");case 3:return t.next=5,n.dispatch("lists/getLists");case 5:n.commit("group/groupList/INIT");case 6:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),methods:Object(o.a)({},Object(v.b)("group/editor",["save"]),Object(v.d)("group/editor",["SET_FORM_VALID","EDITOR_SWITCH_OPEN","SET_FORM_VALUES"]),{moveToRegisterPage:function(){this.$router.push("/group/register")},GroupEdit:function(){return new Object({title:"団体情報編集",formType:"edit",methods:{setValues:this.setValues,getOpenMethod:this.$store.state.group.editor.modalOpen,setOpenMethod:this.setOpenMethod,getValidMethod:this.$store.state.group.editor.formValid,setValidMethod:this.setValidMethod,getValuesMethod:this.$store.state.group.editor.values,setValuesMethod:this.setValuesMethod}})},setValues:function(t){this.save()},setOpenMethod:function(t,e){this.EDITOR_SWITCH_OPEN()},setValidMethod:function(t,e){this.SET_FORM_VALID(e)},setValuesMethod:function(t,e){this.SET_FORM_VALUES(e)}})},y=Object(f.a)(x,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-layout",{attrs:{"d-block":""}},[n("v-layout",{attrs:{"justify-space-between":""}},[n("PageTitle",{staticClass:"mb-3"},[t._v("登録団体")]),t._v(" "),t.hasPrivScope?n("v-btn",{staticClass:"white--text",attrs:{color:"primary"},on:{click:t.moveToRegisterPage}},[n("v-icon",{attrs:{left:"",small:""}},[t._v("fa-plus")]),t._v("\n      新規団体登録\n    ")],1):t._e()],1),t._v(" "),n("ListSelector",{attrs:{"form-type":"watch"}}),t._v(" "),n("GroupList"),t._v(" "),n("GroupEditor",{attrs:{"form-options":t.GroupEdit}})],1)},[],!1,null,"43432aba",null);e.default=y.exports}}]);