(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{406:function(e,t,n){"use strict";var r={name:"PageTitleComponent"},o=n(6),component=Object(o.a)(r,function(){var e=this.$createElement;return(this._self._c||e)("h1",[this._t("default")],2)},[],!1,null,"46686d52",null);t.a=component.exports},465:function(e,t,n){"use strict";n.r(t);n(4);var r=n(0),o=n(17),c=n(406),l={name:"ManageAdminUsersComponent",data:function(){return{users:[],changePswd:{isShow:!1,value:""},tableHeaders:[{text:"ユーザ名",sortable:!1},{text:"Scope",sortable:!1},{text:"パスワード (クリックで編集)",sortable:!1}]}},created:function(){var e=Object(r.a)(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$axios.get("/admin_user/list");case 2:t=e.sent,this.users=t.data;case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),methods:{openChangePswdForm:function(){this.changePswd.value="",this.changePswd.isShow=!1},attemptSavePswd:function(){var e=Object(r.a)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$axios.patch("/admin_user/change_password",{username:t,new_password:this.changePswd.value});case 2:this.$store.dispatch("notification/push",{text:"ユーザ「".concat(t,"」のパスワードを変更しました"),type:"success"});case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}},d=n(6),v=Object(d.a)(l,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",[n("h2",{staticClass:"mb-2"},[e._v("管理者ユーザ管理")]),e._v(" "),e._m(0),e._v(" "),n("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.tableHeaders,items:e.users,"hide-actions":""},scopedSlots:e._u([{key:"items",fn:function(t){return[n("td",[e._v(e._s(t.item.name))]),e._v(" "),n("td",[e._v(e._s(t.item.scopes))]),e._v(" "),n("td",[n("v-edit-dialog",{attrs:{large:"",lazy:"","save-text":"保存","cancel-text":"キャンセル"},on:{open:e.openChangePswdForm,save:function(n){e.attemptSavePswd(t.item.name)}}},[n("span",[e._v("********")]),e._v(" "),n("v-text-field",{staticClass:"pt-4",attrs:{slot:"input","append-icon":e.changePswd.isShow?"visibility_off":"visibility",type:e.changePswd.isShow?"text":"password",label:"新しいパスワード",autofocus:"",required:""},on:{"click:append":function(t){e.changePswd.isShow=!e.changePswd.isShow}},slot:"input",model:{value:e.changePswd.value,callback:function(t){e.$set(e.changePswd,"value",t)},expression:"changePswd.value"}})],1)],1)]}}])},[n("template",{slot:"no-data"},[e._v("\n      ユーザが存在しません\n    ")])],2)],1)},[function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("\n    管理画面にログインするためのユーザです。ユーザごとに権限 (Scope) が異なります。"),t("br"),this._v("\n    ユーザの追加や削除・ユーザ名や Scope の変更はできません。パスワードの変更のみ可能です。\n  ")])}],!1,null,"0cd0975a",null).exports,m=n(2),h=n(7),f={name:"SettingsManageUserComponent",data:function(){return{headers:[{text:"ユーザ名",sortable:!1},{text:"パスワード",sortable:!1},{text:"操作",sortable:!1}]}},computed:Object(m.a)({},Object(h.e)("settings/manageUsers",["users"])),methods:Object(m.a)({},Object(h.b)("settings/manageUsers",["openEditor","deleteUser"]))},table=Object(d.a)(f,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.users,"hide-actions":""},scopedSlots:e._u([{key:"items",fn:function(t){return[n("td",[e._v(e._s(t.item.name))]),e._v(" "),n("td",[e._v("********")]),e._v(" "),n("td",{staticClass:"layout"},[n("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(n){e.openEditor(t.item.id)}}},[e._v("\n        edit\n      ")]),e._v(" "),n("v-icon",{attrs:{small:""},on:{click:function(n){e.deleteUser(t.item.id)}}},[e._v("\n        delete\n      ")])],1)]}}])},[n("template",{slot:"no-data"},[e._v("\n    ユーザが存在しません\n  ")])],2)},[],!1,null,"b9adbbc2",null).exports,_=(n(10),{name:"SettingsManageUserEditModalComponent",data:function(){return{passwordShow:!1}},computed:Object(m.a)({},Object(h.e)("settings/manageUsers",["editor"]),Object(h.c)("settings/manageUsers",["isAdd"]),{isOpen:{get:function(){return this.editor.modalOpen},set:function(e){this.SWITCH_EDITOR_OPEN(e)}},values:{get:function(){return this.editor.values},set:function(e){this.UPDATE_VALUES_FROM_EDITOR(e)}}}),methods:Object(m.a)({},Object(h.d)("settings/manageUsers",["SWITCH_EDITOR_OPEN","UPDATE_VALUES_FROM_EDITOR"]),Object(h.b)("settings/manageUsers",["save"]))}),w={name:"SettingsManageUserComponent",components:{UserTable:table,EditorModal:Object(d.a)(_,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.isOpen,callback:function(t){e.isOpen=t},expression:"isOpen"}},[n("v-card",[n("form",{on:{submit:function(t){return t.preventDefault(),e.save(t)}}},[n("v-card-title",[n("span",{staticClass:"headline"},[e._v("\n          利用者側ユーザ\n          "),e.isAdd?n("span",[e._v("追加")]):n("span",[e._v("編集")])])]),e._v(" "),n("v-card-text",[n("v-container",{attrs:{"grid-list-md":""}},[n("v-layout",{attrs:{wrap:""}},[n("v-flex",{attrs:{xs12:"",sm6:""}},[n("v-text-field",{attrs:{required:"",label:"ユーザ名"},model:{value:e.values.name,callback:function(t){e.$set(e.values,"name",t)},expression:"values.name"}})],1),e._v(" "),n("v-flex",{attrs:{xs12:"",sm6:""}},[n("v-text-field",{attrs:{"append-icon":e.passwordShow?"visibility_off":"visibility",type:e.passwordShow?"text":"password",required:"",label:"パスワード"},on:{"click:append":function(t){e.passwordShow=!e.passwordShow}},model:{value:e.values.password,callback:function(t){e.$set(e.values,"password",t)},expression:"values.password"}})],1)],1)],1)],1),e._v(" "),n("v-card-actions",[n("v-spacer"),e._v(" "),n("v-btn",{attrs:{disabled:e.editor.saving,color:"blue darken-1",flat:""},on:{click:function(t){e.isOpen=!1}}},[e._v("キャンセル")]),e._v(" "),n("v-btn",{attrs:{loading:e.editor.saving,color:"blue darken-1",type:"submit",flat:""}},[e._v("保存")])],1)],1)])],1)},[],!1,null,"1a280a76",null).exports},methods:Object(m.a)({},Object(h.b)("settings/manageUsers",["openEditor"]))},x=Object(d.a)(w,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-layout",{attrs:{"d-block":""}},[n("v-layout",[n("v-flex",[n("h2",{staticClass:"mb-2"},[e._v("利用者側認証情報管理")]),e._v(" "),n("p",[e._v("\n        利用者が登録ページに入るための認証情報を管理します。\n      ")])]),e._v(" "),n("v-flex",{staticClass:"align-self-center shrink",attrs:{"d-flex":""}},[n("v-btn",{staticClass:"white--text",attrs:{color:"primary"},on:{click:function(t){e.openEditor()}}},[n("v-icon",{attrs:{left:"",small:""}},[e._v("fa-plus")]),e._v("\n        ユーザ作成\n      ")],1)],1)],1),e._v(" "),n("UserTable"),e._v(" "),n("EditorModal")],1)},[],!1,null,"9131ec9a",null).exports,k={name:"ManageApiToken",data:function(){return{apiToken:null}},created:function(){var e=Object(r.a)(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$axios.$get("/api_token");case 2:t=e.sent,n=t.token,this.apiToken=n;case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),methods:{generateToken:function(){var e=Object(r.a)(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$axios.$post("/api_token/generate");case 2:t=e.sent,n=t.token,this.apiToken=n,this.$store.dispatch("notification/push",{text:"API Token を生成しました",type:"success"});case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}},O=Object(d.a)(k,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",[n("v-layout",[n("v-flex",[n("h2",{staticClass:"mb-2"},[e._v("API Token 管理")]),e._v(" "),n("p",[e._v("\n        API を利用するための Token です。\n      ")])]),e._v(" "),n("v-flex",{staticClass:"align-self-center shrink",attrs:{"d-flex":""}},[n("v-btn",{staticClass:"white--text",attrs:{color:"primary"},on:{click:e.generateToken}},[n("v-icon",{attrs:{left:"",small:""}},[e._v("fa-redo-alt")]),e._v("\n        Token 再生成\n      ")],1)],1)],1),e._v(" "),n("v-card",{staticClass:"pa-3"},[e._v("\n    "+e._s(e.apiToken)+"\n  ")])],1)},[],!1,null,"6877903d",null).exports,S={name:"SettingsIndexPage",components:{PageTitle:c.a,ManageAdminUser:v,ManageUser:x,ManageApiToken:O},validate:function(e){return e.store.dispatch("auth/scopeFilter",[o.a.SETTINGS]),!0},fetch:function(){var e=Object(r.a)(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.store,e.next=3,n.dispatch("settings/manageUsers/getUsers");case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},T=Object(d.a)(S,function(){var e=this.$createElement,t=this._self._c||e;return t("v-layout",{attrs:{"d-block":""}},[t("PageTitle",{staticClass:"mb-4"},[this._v("設定")]),this._v(" "),t("ManageAdminUser",{staticClass:"mb-5"}),this._v(" "),t("ManageUser",{staticClass:"mb-5"}),this._v(" "),t("ManageApiToken")],1)},[],!1,null,"4a92f611",null);t.default=T.exports}}]);